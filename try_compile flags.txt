CMAKE_MINIMUM_REQUIRED(VERSION 2.8 FATAL_ERROR)
PROJECT(TRY_COMPILE_NO_LINK CXX)
FILE(WRITE A.cxx "void f(void){}")  # compiles
FILE(WRITE B.cxx "void f(void){")   # doesn't
TRY_COMPILE(RES1 ${CMAKE_CURRENT_BINARY_DIR}
${CMAKE_CURRENT_SOURCE_DIR}/A.cxx OUTPUT_VARIABLE LOG1)
MESSAGE("RES1: ${RES1}")
MESSAGE("LOG1: ${LOG1}")
TRY_COMPILE(RES2 ${CMAKE_CURRENT_BINARY_DIR}
${CMAKE_CURRENT_SOURCE_DIR}/A.cxx CMAKE_FLAGS
"-DCMAKE_CXX_LINK_EXECUTABLE='echo not linking now...'" OUTPUT_VARIABLE
LOG2)
MESSAGE("RES2: ${RES2}")
MESSAGE("LOG2: ${LOG2}")
TRY_COMPILE(RES3 ${CMAKE_CURRENT_BINARY_DIR}
${CMAKE_CURRENT_SOURCE_DIR}/B.cxx CMAKE_FLAGS
"-DCMAKE_CXX_LINK_EXECUTABLE='echo not linking now...'" OUTPUT_VARIABLE
LOG3)
MESSAGE("RES3: ${RES3}")
MESSAGE("LOG3: ${LOG3}")

Case 1 fails due to the missing main() in A.cxx, case 3 fails because
B.cxx has a bad syntax, but case 2 does succeed in spite of main()
missing in A.cxx.